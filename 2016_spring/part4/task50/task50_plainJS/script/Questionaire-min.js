function Questionaire(){this.init(),this.strPage=""}Questionaire.prototype={init:function(){var a,b,c,d;switch(console.log("init Questionaire & IDB",this),a=indexedDB.open("Questionaire",1),a.onerror=function(a){alert("创建/打开数据库失败，失败MSG："+a.target.error.message)},a.onupgradeneeded=function(a){var b=a.target.result,c=b.createObjectStore("myQuestionaire",{keyPath:"subject"});c.createIndex("count","count",{unique:!1}),c.createIndex("date","date",{unique:!1}),c.createIndex("state","state",{unique:!1}),c.createIndex("allData","allData",{unique:!1}),c.createIndex("time","time",{unique:!0})},b=window.location.href,c=b.split("/"),d=c[c.length-1],this.strPage=d.slice(0,d.indexOf(".")),this.strPage){case"edit":this.edit.init();break;case"index":this.index.init();break;case"write":this.write.init();break;case"detail":this.detail.init()}},detail:{init:function(){console.log("init detail page"),this.requestInfo=decodeURI(location.search.substring(9)),this.DBtoOBJ()},DBtoOBJ:function(){var c,a=indexedDB.open("Questionaire",1);a.onerror=function(a){alert("创建/打开数据库失败，失败MSG："+a.target.error.message)},c=this,a.onsuccess=function(a){var b,d,e;db=a.target.result,b=db.transaction("myQuestionaire","readwrite"),d=b.objectStore("myQuestionaire"),e=d.get(c.requestInfo),e.onsuccess=function(){c.OBJtoOBJ(e.result)}}},OBJtoOBJ:function(a){var d,e,f,g,h,i,j,k,l,m,n;for(this.currentObj=a,d=[],e=[],f="",g=0;g<a.allData.length;g++){switch(h=[],a.allData[g].type){case"radio":f+="<div class='detail-box'><div><span>"+a.allData[g].name+"</span><span>单选题</span><div id='"+a.allData[g].name+"' class='echart''>";break;case"checkbox":f+="<div class='detail-box'><div><span>"+a.allData[g].name+"</span><span>多选题</span><div id='"+a.allData[g].name+"' class='echart''>";break;case"textarea":f+="<div class='detail-box'><div><span>"+a.allData[g].name+"</span><span>文本题</span><div id='"+a.allData[g].name+"' class='echart''>"}for(i=[],j=0;j<a.allData[g].data.length;j++)i.push(this.calculatePersent(a.allData[g].data[j].count,a.count)),h.push(a.allData[g].data[j].content);e.push(h),d.push(i),f+="</div></div></div>"}for(document.getElementById("page_subject").innerHTML=this.requestInfo,document.getElementById("content_area").innerHTML=f,console.log(a,d),g=0;g<a.allData.length;g++){switch(k="Q"+(g+1),l=a.allData[g].subject,m="该问卷总提交数"+a.count+"次",console.log(e,d[g]),n=echarts.init(document.getElementById(k)),option={baseOption:{title:{text:l,subtext:m,left:"1%"},color:["#f97a4b"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"},position:["50%","50%"]},grid:{containLabel:!0,right:"10%"},xAxis:[{type:"category",data:e[g],axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value",axisLabel:{show:!0,interval:"auto",formatter:"{value} %"}}],series:[{name:"直接访问",type:"bar",barWidth:"30%",data:d[g]}]},media:[{option:{grid:{left:"3%",right:"4%",bottom:"3%"},series:[{}]}}]},a.allData[g].type){case"radio":case"checkbox":option.baseOption.series[0].name="被选择的比例";break;case"textarea":option.baseOption.series[0].name="该文本题的有效率"}n.setOption(option)}},calculatePersent:function(a,b){var c=(100*(Number(a)/Number(b))).toFixed(2);return console.log(c),isNaN(c)?c="数据不够,请先填写数据！":c}},write:{init:function(){console.log("init write page"),this.requestInfo=decodeURI(location.search.substring(9)),this.DBtoOBJ(),this.currentObj},DBtoOBJ:function(){var b,a=indexedDB.open("Questionaire",1);a.onerror=function(a){alert("创建/打开数据库失败，失败MSG："+a.target.error.message)},b=this,a.onsuccess=function(a){var c,d,e;db=a.target.result,c=db.transaction("myQuestionaire","readwrite"),d=c.objectStore("myQuestionaire"),e=d.get(b.requestInfo),e.onsuccess=function(){b.OBJtoHTML(e.result)}}},OBJtoHTML:function(a){var b,c,d;for(this.currentObj=a,b="",c=0;c<a.allData.length;c++){switch(a.allData[c].type){case"radio":b+="<div class='questions'><div class='radio'><span>"+a.allData[c].name+"</span><span>单选题</span><span class='subject'>"+a.allData[c].subject+"</span></div><div>";break;case"checkbox":b+="<div class='questions'><div class='checkbox'><span>"+a.allData[c].name+"</span><span>多选题</span><span class='subject'>"+a.allData[c].subject+"</span></div><div>";break;case"textarea":b+="<div class='questions'><div class='textarea'><span>"+a.allData[c].name+"</span><span>文本题</span><span class='subject'>"+a.allData[c].subject+"</span></div><div>"}for(d=0;d<a.allData[c].data.length;d++)switch(a.allData[c].type){case"radio":b+="<div class='radios'><input type='radio' name='"+a.allData[c].data[d].randomNumberId+"' ><span>"+a.allData[c].data[d].content+"</span></div>";break;case"checkbox":b+="<div class='checkboxs'><input type='checkbox' ><span>"+a.allData[c].data[d].content+"</span></div>";break;case"textarea":b+="true"==a.allData[c].data[d].status?"<span class='true'>此题必填</span> <div><textarea cols='20' rows='10' placeholder='请填写你的回答' class='textareas' ></textarea></div>":"<span class='false'>此题选填</span> <div><textarea cols='20' rows='10' placeholder='请填写你的回答' class='textareas' ></textarea></div>"}b+="</div></div>"}document.getElementById("page_subject").innerHTML=this.requestInfo,document.getElementById("content_area").innerHTML=b},putDataToDB:function(){var b,c,a=indexedDB.open("Questionaire",1);a.onerror=function(a){alert("创建/打开数据库失败，失败MSG："+a.target.error.message)},c=this,a.onsuccess=function(a){b=a.target.result;var d=b.transaction("myQuestionaire","readwrite");store=d.objectStore("myQuestionaire"),store.put({count:c.currentObj.count,subject:c.currentObj.subject,date:c.currentObj.date,state:c.currentObj.state,allData:c.currentObj.allData,time:c.currentObj.time}),alert("问卷提交成功，点击确定1秒后自动跳转到主页。"),setTimeout(function(){window.location.href="index.html"},1500)}},saveObj:function(){var c,d,e,f,g,a=document.getElementsByClassName("questions"),b="";for(c=0;c<a.length;c++)switch(b=a[c].firstElementChild.className){case"radio":for(d=a[c].getElementsByClassName("radios"),e=0;e<d.length;e++)d[e].firstElementChild.checked&&this.currentObj.allData[c].data[e].count++;break;case"checkbox":for(f=a[c].getElementsByClassName("checkboxs"),e=0;e<f.length;e++)f[e].firstElementChild.checked&&this.currentObj.allData[c].data[e].count++;break;case"textarea":if(g=a[c].getElementsByTagName("textarea")[0],"true"==g.parentNode.previousElementSibling.className&&""==g.value)break;this.currentObj.allData[c].data[0].content=g.value,this.currentObj.allData[c].data[0].count++}this.currentObj.count++,this.putDataToDB()}},index:{init:function(){this.renderTbody(),this.needDeleteArr=[],console.log("init index page")},toggleMask:function(a){var e,f,b=a||window.event,c=b.target||b.srcElement,d=document.getElementById("maskControl").className;if(document.getElementById("maskControl").className="show"===d?"hide":"show","delete_some"==c.id){for(e=document.getElementById("checkBox").getElementsByClassName("checked"),f=0;f<e.length;f++)this.needDeleteArr.push(e[f].lastElementChild.id);return this.needDeleteArr}return this.needDeleteArr.push(c.parentNode.id),this.needDeleteArr},toggleCheck:function(a){var b=a||window.event,c=b.target||b.srcElement;c.checked?c.parentNode.parentNode.className="checked":(document.getElementById("checkAll").checked&&(document.getElementById("checkAll").checked=""),c.parentNode.parentNode.className="")},checkAll:function(a){var e,b=a||window.event,c=b.target||b.srcElement,d=document.getElementsByName("myQN");if(c.checked)for(e=0;e<d.length;e++)d[e].checked="checked",d[e].parentNode.parentNode.className="checked";else for(e=0;e<d.length;e++)d[e].checked="",d[e].parentNode.parentNode.className=""},renderTbody:function(){var b="",c=0,a=indexedDB.open("Questionaire",1),d=this;a.onsuccess=function(){var a=this.result,e=a.transaction("myQuestionaire","readwrite"),f=e.objectStore("myQuestionaire"),g=f.openCursor(),h="",i="",j="";g.onsuccess=function(a){var g,k,e=a.target.result;if(e){switch(e.value.state){case"-1":h="未发布",i="unpub",j="<a href='edit.html?subject="+encodeURI(e.value.subject)+"'><input type='button' value='编辑问卷'></a><input type='button' value='删除问卷' onclick='myQuestionaire.index.toggleMask(event)'>";break;case"0":h="发布中",i="pubing",j="<a href='write.html?subject="+encodeURI(e.value.subject)+"'><input type='button' value='填写数据'></a><a href='detail.html?subject="+encodeURI(e.value.subject)+"'><input type='button' value='查看数据'></a>";break;case"1":h="已结束",i="pubed",j="<a href='detail.html?subject="+encodeURI(e.value.subject)+"'><input type='button' value='查看数据'></a><input type='button' value='删除问卷' onclick='myQuestionaire.index.toggleMask(event)'>"}d.getTimeCompare(e.value.date)&&(g=e.value.subject,k=f.get(g),k.onsuccess=function(a){var b=a.target.result;b.state="1",f.put(b)}),b+="<tr><td><input type='checkbox' name='myQN' onchange='myQuestionaire.index.toggleCheck(event)' ></td><td>"+e.value.subject+"</td><td>"+e.value.date+"</td><td class='"+i+"'>"+h+"</td><td id="+e.value.subject+">"+j+"</td></tr>",e.value.date,c++,e.continue()}else 0===c&&(alert("还没有问卷，先去创建吧！点击确定将自动跳转至新建页面。"),window.location.href="add.html"),document.getElementById("checkBox").innerHTML=b}}},getTimeCompare:function(a){var b=a.replace(/-/g,"/"),c=new Date,d=c.getFullYear(),e=c.getMonth()+1,f=c.getDate(),g=d+"/"+e+"/"+f,h=new Date(b),i=new Date(g);return h.getTime()>=i.getTime()?!1:!0},deleteQuestionaire:function(){var a=indexedDB.open("Questionaire",1),c=this;a.onsuccess=function(){var e,f,a=this.result,b=a.transaction("myQuestionaire","readwrite"),d=b.objectStore("myQuestionaire");for(e=0;e<c.needDeleteArr.length;e++)f=d.delete(c.needDeleteArr[e]),f.onsuccess=function(){alert("删除成功！"),c.renderTbody()};document.getElementById("maskControl").className="hide",document.getElementById("checkAll").checked&&(document.getElementById("checkAll").checked="")}}},edit:{init:function(){this.requestInfo=decodeURI(location.search.substring(9)),""!=this.requestInfo&&this.DBtoOBJ(),console.log("init edit page")},DBtoOBJ:function(){var c,a=indexedDB.open("Questionaire",1);a.onerror=function(a){alert("创建/打开数据库失败，失败MSG："+a.target.error.message)},c=this,a.onsuccess=function(a){var b,d,e;db=a.target.result,b=db.transaction("myQuestionaire","readwrite"),d=b.objectStore("myQuestionaire"),e=d.get(c.requestInfo),e.onsuccess=function(){c.OBJtoHTML(e.result)}}},OBJtoHTML:function(a){var c,d,b="";for(c=0;c<a.allData.length;c++){switch(a.allData[c].type){case"radio":b+="<div class='questions'><div class='radio'><span>"+a.allData[c].name+"</span><span>单选题</span><input type='text' class='subject' placeholder='单选标题' value='"+a.allData[c].subject+"'></div><div>";break;case"checkbox":b+="<div class='questions'><div class='radio'><span>"+a.allData[c].name+"</span><span>多选题</span><input type='text' class='subject' placeholder='多选标题' value='"+a.allData[c].subject+"'></div><div>";break;case"textarea":b+="<div class='questions'><div class='textarea'><span>"+a.allData[c].name+"</span><span>文本题</span><input type='text' class='subject' placeholder='文本标题' value='"+a.allData[c].subject+"'></div><div>"}for(d=0;d<a.allData[c].data.length;d++)switch(a.allData[c].type){case"radio":b+="<div class='radios'><input type='radio' name='"+Math.random()+"'  disabled='disabled'><input type='text' placeholder='单选内容' value='"+a.allData[c].data[d].content+"'><span onclick='myQuestionaire.edit.deleSelf(event)' class='dele-self'>X</span></div>";break;case"checkbox":b+="<div class='checkboxs'><input type='checkbox'  disabled='disabled'><input type='text' placeholder='多选内容' value='"+a.allData[c].data[d].content+"'><span onclick='myQuestionaire.edit.deleSelf(event)' class='dele-self'>X</span></div>";break;case"textarea":b+="true"==a.allData[c].data[d].status?"<input type='checkbox' checked='checked'><span>此题是否必填</span> <div><textarea cols='20' rows='10' placeholder='请填写你的回答' class='textareas'  disabled='disabled'></textarea></div>":"<input type='checkbox' ><span>此题是否必填</span> <div><textarea cols='20' rows='10' placeholder='请填写你的回答' class='textareas'  disabled='disabled'></textarea></div>"}switch(a.allData[c].type){case"radio":case"checkbox":b+="</div><div class='add-line'><span onclick='myQuestionaire.edit.newLine(event)'>++++++++++++</span></div><div class='tool-line'><span onclick='myQuestionaire.edit.moveUp(event)'>上移</span><span onclick='myQuestionaire.edit.moveDown(event)'>下移</span><span onclick='myQuestionaire.edit.copy(event)'>复用</span><span onclick='myQuestionaire.edit.deleQuestion(event)'>删除</span></div></div>";break;case"textarea":b+="</div><div class='tool-line'><span onclick='myQuestionaire.edit.moveUp(event)'>上移</span><span onclick='myQuestionaire.edit.moveDown(event)'>下移</span><span onclick='myQuestionaire.edit.copy(event)'>复用</span><span onclick='myQuestionaire.edit.deleQuestion(event)'>删除</span></div></div>"}}document.getElementById("page_subject").value=this.requestInfo,document.getElementById("edit-qbox").innerHTML=b,document.getElementsByClassName("date")[0].value=a.date},topPart:function(a){var b=document.createElement("div"),c=document.createElement("span"),d=document.createElement("span"),e=document.createElement("input");switch(e.type="text",e.className="subject",a){case"radio":b.className="radio",d.innerHTML="单选题",e.placeholder="单选标题";break;case"checkbox":b.className="checkbox",d.innerHTML="多选题",e.placeholder="多选标题";break;case"textarea":b.className="textarea",d.innerHTML="文本题",e.placeholder="文本标题"}return b.appendChild(c),b.appendChild(d),b.appendChild(e),b},middlePart:function(a,b){var g,h,i,c=document.createElement("div"),d=document.createElement("div"),e=document.createElement("input"),f=document.createElement("input");switch(f.type="text",g=document.createElement("span"),g.setAttribute("onclick","myQuestionaire.edit.deleSelf(event)"),g.innerHTML="X",g.setAttribute("class","dele-self"),a){case"radio":return e.type="radio",e.name="radio"+b,e.disabled="disabled",f.placeholder="单选内容",c.className="radios",c.appendChild(e),c.appendChild(f),c.appendChild(g),d.appendChild(c),d;case"checkbox":return e.type="checkbox",e.disabled="disabled",f.placeholder="多选内容",c.className="checkboxs",c.appendChild(e),c.appendChild(f),c.appendChild(g),d.appendChild(c),d;case"textarea":return h=document.createElement("input"),h.type="checkbox",g=document.createElement("span"),g.innerHTML="此题是否必填",i=document.createElement("textarea"),i.cols="20",i.rows="10",i.disabled="disabled",i.className="textareas",c.appendChild(i),d.appendChild(h),d.appendChild(g),d.appendChild(c),d}},bottomPart:function(){var b,c,d,e,a=document.createElement("div");return a.setAttribute("class","tool-line"),b=document.createElement("span"),b.innerHTML="上移",b.setAttribute("onclick","myQuestionaire.edit.moveUp(event)"),c=document.createElement("span"),c.innerHTML="下移",c.setAttribute("onclick","myQuestionaire.edit.moveDown(event)"),d=document.createElement("span"),d.innerHTML="复用",d.setAttribute("onclick","myQuestionaire.edit.copy(event)"),e=document.createElement("span"),e.innerHTML="删除",e.setAttribute("onclick","myQuestionaire.edit.deleQuestion(event)"),a.appendChild(b),a.appendChild(c),a.appendChild(d),a.appendChild(e),a},addPart:function(){var b,a=document.createElement("div");return a.setAttribute("class","add-line"),b=document.createElement("span"),b.setAttribute("onclick","myQuestionaire.edit.newLine(event)"),b.innerHTML="++++++++++++",a.appendChild(b),a},newRadio:function(){var a=Math.random(),b=document.createElement("div");b.className="questions",b.appendChild(this.topPart("radio")),b.appendChild(this.middlePart("radio",a)),b.appendChild(this.addPart()),b.appendChild(this.bottomPart()),document.getElementById("edit-qbox").appendChild(b),myQuestionaire.edit.queueUp()},newCheckbox:function(){var a=document.createElement("div");a.className="questions",a.appendChild(this.topPart("checkbox")),a.appendChild(this.middlePart("checkbox")),a.appendChild(this.addPart()),a.appendChild(this.bottomPart()),document.getElementById("edit-qbox").appendChild(a),myQuestionaire.edit.queueUp()},newTextarea:function(){var a=document.createElement("div");a.className="questions",a.appendChild(this.topPart("textarea")),a.appendChild(this.middlePart("textarea")),a.appendChild(this.bottomPart()),document.getElementById("edit-qbox").appendChild(a),myQuestionaire.edit.queueUp()},newLine:function(a){var d,e,f,g,h,b=a||window.event,c=b.target||b.srcElement;switch(this.getQuestionType(c)){case"radio":d=c.parentNode.previousElementSibling.firstElementChild.firstElementChild.name,e=document.createElement("input"),e.type="radio",e.name=d,e.disabled="disabled",f=document.createElement("input"),f.type="text",f.placeholder="单选内容",g=document.createElement("span"),g.setAttribute("onclick","myQuestionaire.edit.deleSelf(event)"),g.innerHTML="X",g.setAttribute("class","dele-self"),h=document.createElement("div"),h.className="radios",h.appendChild(e),h.appendChild(f),h.appendChild(g),c.parentNode.previousSibling.appendChild(h);break;case"checkbox":e=document.createElement("input"),e.type="checkbox",e.disabled="disabled",f=document.createElement("input"),f.type="text",f.placeholder="多选内容",g=document.createElement("span"),g.setAttribute("onclick","myQuestionaire.edit.deleSelf(event)"),g.innerHTML="X",g.setAttribute("class","dele-self"),h=document.createElement("div"),h.className="checkboxs",h.appendChild(e),h.appendChild(f),h.appendChild(g),c.parentNode.previousSibling.appendChild(h)}},deleSelf:function(a){var b=a||window.event,c=b.target||b.srcElement,d=c.parentNode;1!=d.parentNode.getElementsByTagName("div").length&&d.parentNode.removeChild(d)},saveObj:function(){var a,b,c,d,e,f,g,h,i,j;for(this.info={},this.data=[],a=document.getElementsByClassName("questions"),b=0;b<a.length;b++)switch(c={name:"",type:"",subject:"",data:[]},c.name=a[b].firstElementChild.firstElementChild.innerHTML,c.type=a[b].firstElementChild.className,c.subject=a[b].getElementsByClassName("subject")[0].value.trim(),c.type){case"radio":for(d=a[b].getElementsByClassName("radios"),e=Math.random(),f=0;f<d.length;f++)g={status:0,content:"",count:0,randomNumberId:e},g.status=d[f].firstElementChild.checked?"checked":"",g.content=d[f].firstElementChild.nextElementSibling.value,c.data.push(g);this.data.push(c);break;case"checkbox":for(h=a[b].getElementsByClassName("checkboxs"),f=0;f<h.length;f++)g={status:0,content:"",count:0},g.status=h[f].firstElementChild.checked?"checked":"",g.content=h[f].firstElementChild.nextElementSibling.value,c.data.push(g);this.data.push(c);break;case"textarea":i=a[b].getElementsByTagName("textarea")[0],g={status:0,content:"",count:0},g.status=i.parentNode.previousElementSibling.previousElementSibling.checked?"true":"false",g.content=i.value,c.data.push(g),this.data.push(c)}j=document.getElementById("page_subject").value,this.info.subject=this.trim(j,"g"),this.info.allData=this.data,this.info.date=document.querySelector("[data-calendar]").value,document.getElementById("limitedDate").innerHTML=document.querySelector("[data-calendar]").value,this.info.count=0,this.info.time=this.getCurrentTime().time},trim:function(a,b){var c;return c=a.replace(/(^\s+)|(\s+$)/g,""),"g"==b.toLowerCase()&&(c=c.replace(/\s/g,"")),c},save:function(){this.saveObj(),this.isDateChoose()&&(this.info.state="-1",this.addDataToDB(this.requestInfo),alert("保存成功"))},confirmPost:function(){this.saveObj();var a=document.getElementById("maskControl").className;document.getElementById("maskControl").className="show"===a?"hide":"show"},post:function(){this.saveObj(),this.isDateChoose()&&this.isRightNum()&&(document.getElementById("maskControl").className="hide",this.info.state="0",this.addDataToDB(this.requestInfo),alert("发布成功,点击确定1秒后自动跳转到主页。"),setTimeout(function(){window.location.href="index.html"},2e3))},isRightNum:function(){var a=this.info.allData.length;return 1>a||a>10?(alert("问题数量，至少一个，最多十个才能发布，请重新填写！"),this.confirmPost(),!1):!0},isDateChoose:function(){return""==this.info.date?(alert("必须选择一个日期！"),!1):!0},moveUp:function(a){var b,c,d;a=a||window.event,b=a.target.parentNode.parentNode,c=b.previousElementSibling,null!=c?(d=b.cloneNode(!0),b.parentNode.removeChild(b),c.parentNode.insertBefore(d,c)):alert("移到头了！"),this.queueUp()},queueUp:function(){var b,c,a=document.getElementById("edit-qbox");for(c=0;c<a.children.length;c++)b=c+1,a.children[c].firstElementChild.firstElementChild.innerHTML="Q"+b},moveDown:function(a){var f,g,b=a||window.event,c=b.target||b.srcElement,d=c.parentNode.parentNode;d.parentNode,f=d.nextElementSibling,null!=f?(g=d.cloneNode(!0),d.parentNode.removeChild(d),f.parentNode.insertBefore(g,f.nextElementSibling)):alert("移到头了！"),this.queueUp()},copy:function(a){var g,h,i,b=a||window.event,c=b.target||b.srcElement,d=c.parentNode.parentNode,e=d.cloneNode(!0),f="Q"+this.getQuestionRank(a);if(e.firstElementChild.firstChild.innerHTML=f,g=Math.random(),"radio"==e.firstElementChild.className)for(h=e.getElementsByClassName("radios"),i=0;i<h.length;i++)e.getElementsByClassName("radios")[i].firstElementChild.name="radio"+g;d.parentNode.appendChild(e)},deleQuestion:function(a){var b=a||window.event,c=b.target||b.srcElement,d=c.parentNode.parentNode;d.parentNode.removeChild(d),this.queueUp()},getQuestionRank:function(){return document.getElementById("edit-qbox").children.length+1},getQuestionType:function(a){return a.parentNode.parentNode.firstElementChild.className},getCurrentTime:function(){var a=new Date,b=a.getFullYear(),c=a.getMonth(),d=a.getDate(),e=a.getHours(),f=a.getMinutes(),g=a.getSeconds(),h=a.getDay(),i=a.getTime();return{year:b,month:c,date:d,hour:e,minute:f,second:g,day:h,time:i}},addDataToDB:function(){var b,a=indexedDB.open("Questionaire",1);a.onerror=function(a){alert("创建/打开数据库失败，失败MSG："+a.target.error.message)},b=this,a.onsuccess=function(a){var c=a.target.result,d=c.transaction("myQuestionaire","readwrite");store=d.objectStore("myQuestionaire"),store.put({count:b.info.count,subject:b.info.subject,date:b.info.date,state:b.info.state,allData:b.info.allData,time:b.info.time})}},toggleShowBtn:function(a){var b=a||window.event,c=b.target||b.srcElement;c.parentNode.firstElementChild.className="hide"==c.parentNode.firstElementChild.className?"show":"hide"}}},-1!=navigator.appName.indexOf("Microsoft Internet Explorer")&&document.all&&"-1"==navigator.userAgent.split(";")[1].toLowerCase().indexOf("msie 10.0")&&(alert("IE9及以下版本浏览器不兼容，为了您的体验请更换其他高级浏览器(Chrome/Firefox/Edge/Safiri等等)再尝试！点击确定2S后自动前往我的主页。"),setTimeout(function(){window.location.href="http://pkjy.github.io"},2e3));var myQuestionaire=new Questionaire;